(function(){"use strict";var e={6873:function(e,n,a){var t=a(9242),r=a(3396),l=a(7139);const o={class:"app"},c={class:"layout"},s={class:"tab-panel"},i={class:"tabs"},u={class:"results"},d={ref:"mapDiv",class:"google--map",style:{width:"100%",height:"100vh"}};function v(e,n,a,t,v,p){const g=(0,r.up)("TopBar"),f=(0,r.up)("SearchInput"),_=(0,r.up)("PlaceResults");return(0,r.wg)(),(0,r.iD)("div",o,[(0,r.Wm)(g),(0,r._)("div",c,[(0,r._)("div",{class:(0,l.C_)([{"slide-out":!t.mobileMenu},"sidebar"])},[(0,r._)("div",s,[(0,r._)("ul",i,[(0,r._)("li",{class:(0,l.C_)([{active:"founded"===t.currentTab},"tabs--tab"]),onClick:n[0]||(n[0]=e=>t.tabResultSwitcher("founded"))},"Found places ("+(0,l.zw)(t.foundPlaces.length)+")",3),(0,r._)("li",{class:(0,l.C_)([{active:"saved"===t.currentTab},"tabs--tab"]),onClick:n[1]||(n[1]=e=>t.tabResultSwitcher("saved"))},"Saved places ("+(0,l.zw)(t.savedPlaces.length)+")",3)])]),(0,r.Wm)(f),(0,r._)("div",u,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(t.places,(e=>((0,r.wg)(),(0,r.j4)(_,{place:e,key:e.name},null,8,["place"])))),128))])],2),(0,r._)("div",d,null,512)]),(0,r._)("div",{class:"hidder",onClick:n[2]||(n[2]=(...e)=>t.toggleMenu&&t.toggleMenu(...e))},(0,l.zw)(t.toggleIcon),1)])}var p=a(4870);const g={class:"card"},f={class:"card--content"},_={class:"card--content__heading"},h=(0,r.Uk)("Open: "),m={class:"card--action"},b=["src"],w={key:0,class:"card--action__btns"},y={key:1,class:"card--action__btns"};function k(e,n,a,t,o,c){return(0,r.wg)(),(0,r.iD)("div",g,[(0,r._)("div",f,[(0,r._)("h3",_,(0,l.zw)(a.place.name),1),(0,r._)("address",null,(0,l.zw)(a.place.formatted_address),1),(0,r._)("p",null,[h,(0,r._)("strong",null,(0,l.zw)(t.openString),1)])]),(0,r._)("div",m,[(0,r._)("img",{class:"card--action__logo",src:a.place.icon},null,8,b),"founded"===t.currentTab?((0,r.wg)(),(0,r.iD)("div",w,[(0,r._)("button",{class:"card--action__btn",onClick:n[0]||(n[0]=e=>t.createMarker(a.place))},"Add marker ")])):((0,r.wg)(),(0,r.iD)("div",y,[(0,r._)("button",{class:"card--action__btn",onClick:n[1]||(n[1]=e=>t.createMarker(a.place))},"zoom in "),(0,r._)("button",{class:"card--action__btn",onClick:n[2]||(n[2]=e=>t.deleteMarkers(a.place))},"delete ")]))])])}const S={north:61.4755,south:59.1792,east:25.56,west:24.0608},M={lat:60.19,lng:24.95},P={center:M,zoom:12,restriction:{latLngBounds:S,strictBounds:!1}},O=(0,p.iH)(null),C=(0,p.iH)(null);function H(){const e=e=>{C.value=new google.maps.Map(e.value,P)},n=()=>{O.value=new google.maps.LatLng(60.19,24.95)};return{initMap:e,initRestrictions:n,map:C,placesRestrictionArea:O}}const T=(0,p.iH)([]),D=(0,p.iH)([]);let I=(0,p.iH)([]),R=(0,p.iH)("founded");function A(){const e=e=>{R.value=e,"saved"===e&&(I.value=D.value),"founded"===e&&(I.value=T.value)};return{foundPlaces:T,savedPlaces:D,places:I,tabResultSwitcher:e,currentTab:R}}function j(){const e=(e,n)=>{localStorage.setItem(e,JSON.stringify(n))},n=e=>{let n=JSON.parse(localStorage.getItem(e));return null===n&&(n=[]),n};function a(e,n){return n.some((n=>n.place_id===e.place_id))}return{saveToLocalStorage:e,getFromLocalStorage:n,isAlreadyAdded:a}}let z=(0,p.iH)(!0);const L=(0,r.Fl)((()=>z.value?"-":"+"));function x(){const e=()=>{z.value=!z.value};return{toggleIcon:L,toggleMenu:e,mobileMenu:z}}var F={props:{place:{Type:Object,required:!0}},setup(e){const{map:n}=H(),{savedPlaces:a,currentTab:t}=A(),{toggleMenu:l}=x(),{saveToLocalStorage:o,isAlreadyAdded:c}=j();let s=(0,p.qj)(null),i=(0,p.iH)(null);const u=e=>{if(!e.geometry||!e.geometry.location)return;if(l(),null!==s)return void n.value.setCenter(e.geometry.location);let t=new google.maps.Marker({map:n.value,position:e.geometry.location});n.value.setCenter(e.geometry.location);const r=c(e,a.value);r||a.value.push(e),o("places",a.value),f(t,e),s=t},d=e=>{null!==s&&(s.setMap(null),s=(0,p.qj)(null));const n=a.value.findIndex((n=>n.place_id===e.place_id));a.value.splice(n,1),o("places",a.value)},v=e=>e?"Open now":void 0===e?"No Data":e?void 0:"Closed",g=(0,p.iH)(null);(0,r.bv)((()=>{g.value=v(e.place?.opening_hours?.open_now)}));const f=(e,a)=>{const t=`\n            <div class='marker'>\n                <div class='marker--content'>\n                    <div class='marker--content__heading'>\n                        <h4 class='h4'>${a.name}</h4>\n                        <span>${g.value}</span>\n                    </div>\n                    <img class='marker--content__img' src=${a.icon} alt=''>\n                </div>\n                <p>${a.formatted_address}</p>\n            </div>\n            `,r=new google.maps.InfoWindow({content:t});google.maps.event.addListener(e,"click",(()=>{r.open(n.value)})),e.addListener("click",(()=>{r.open({anchor:e,map:n.value})}))};return{createMarker:u,returnOpenString:v,openString:g,errors:i,currentTab:t,deleteMarkers:d}}},q=a(89);const B=(0,q.Z)(F,[["render",k]]);var Q=B;const Z={class:"search"},$={key:0};function K(e,n,a,o,c,s){return(0,r.wg)(),(0,r.iD)("div",null,[(0,r._)("div",Z,[(0,r._)("button",{class:"btn",onClick:n[0]||(n[0]=e=>o.searchForPlaces(o.searchQuery))},"Search"),(0,r.wy)((0,r._)("input",{placeholder:"Start typing...",class:"input-base",type:"text","onUpdate:modelValue":n[1]||(n[1]=e=>o.searchQuery=e)},null,512),[[t.nr,o.searchQuery]])]),o.errorArray.length>0?((0,r.wg)(),(0,r.iD)("ul",$,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(o.errorArray,((e,n)=>((0,r.wg)(),(0,r.iD)("li",{key:n,class:"error"},(0,l.zw)(e),1)))),128))])):(0,r.kq)("",!0)])}let N=(0,p.iH)(null);function W(){const e=e=>{N.value=new google.maps.places.PlacesService(e.value)};return{placesService:N,initPlacesService:e}}var J={setup(){const{placesService:e}=W(),{placesRestrictionArea:n}=H(),a=(e,n,a)=>({location:e,radius:n,query:a}),{foundPlaces:t,tabResultSwitcher:r}=A();let l=(0,p.iH)("");const o=(0,p.iH)([]),c=()=>{if(t.value=[],o.value=[],l.value.length<=3)return void o.value.push("Search text should have atleast 3 letters");const c=a(n.value,"3",l.value);e.value.textSearch(c,((e,n)=>{n===google.maps.places.PlacesServiceStatus.OK&&e?(t.value=e,r("founded")):t.value=[]}))};return{searchForPlaces:c,searchQuery:l,foundPlaces:t,errorArray:o}}};const U=(0,q.Z)(J,[["render",K],["__scopeId","data-v-68b444de"]]);var Y=U;const E=e=>((0,r.dD)("data-v-418f0ca6"),e=e(),(0,r.Cn)(),e),V={class:"nav"},G=E((()=>(0,r._)("h1",null,"My favorite places in Helsinki",-1))),X=E((()=>(0,r._)("span",null,"By Lukasz",-1))),ee=[G,X];function ne(e,n,a,t,l,o){return(0,r.wg)(),(0,r.iD)("nav",V,ee)}var ae={};const te=(0,q.Z)(ae,[["render",ne],["__scopeId","data-v-418f0ca6"]]);var re=te,le={name:"App",components:{PlaceResults:Q,SearchInput:Y,TopBar:re},setup(){const e=(0,p.iH)(null),{initMap:n,initRestrictions:a,map:t}=H(),{initPlacesService:l}=W(),{foundPlaces:o,savedPlaces:c,places:s,tabResultSwitcher:i,currentTab:u}=A(),{getFromLocalStorage:d}=j(),{toggleIcon:v,toggleMenu:g,mobileMenu:f}=x();return(0,r.bv)((()=>{n(e),l(t),a(),i(u.value),c.value=d("places")})),{mapDiv:e,tabResultSwitcher:i,places:s,currentTab:u,foundPlaces:o,savedPlaces:c,toggleIcon:v,tabResultSwitcher:i,toggleMenu:g,mobileMenu:f}}};const oe=(0,q.Z)(le,[["render",v],["__scopeId","data-v-5074aef8"]]);var ce=oe;(0,t.ri)(ce).mount("#app")}},n={};function a(t){var r=n[t];if(void 0!==r)return r.exports;var l=n[t]={exports:{}};return e[t](l,l.exports,a),l.exports}a.m=e,function(){var e=[];a.O=function(n,t,r,l){if(!t){var o=1/0;for(u=0;u<e.length;u++){t=e[u][0],r=e[u][1],l=e[u][2];for(var c=!0,s=0;s<t.length;s++)(!1&l||o>=l)&&Object.keys(a.O).every((function(e){return a.O[e](t[s])}))?t.splice(s--,1):(c=!1,l<o&&(o=l));if(c){e.splice(u--,1);var i=r();void 0!==i&&(n=i)}}return n}l=l||0;for(var u=e.length;u>0&&e[u-1][2]>l;u--)e[u]=e[u-1];e[u]=[t,r,l]}}(),function(){a.n=function(e){var n=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(n,{a:n}),n}}(),function(){a.d=function(e,n){for(var t in n)a.o(n,t)&&!a.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:n[t]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)}}(),function(){var e={143:0};a.O.j=function(n){return 0===e[n]};var n=function(n,t){var r,l,o=t[0],c=t[1],s=t[2],i=0;if(o.some((function(n){return 0!==e[n]}))){for(r in c)a.o(c,r)&&(a.m[r]=c[r]);if(s)var u=s(a)}for(n&&n(t);i<o.length;i++)l=o[i],a.o(e,l)&&e[l]&&e[l][0](),e[l]=0;return a.O(u)},t=self["webpackChunkgoogle_map"]=self["webpackChunkgoogle_map"]||[];t.forEach(n.bind(null,0)),t.push=n.bind(null,t.push.bind(t))}();var t=a.O(void 0,[998],(function(){return a(6873)}));t=a.O(t)})();
//# sourceMappingURL=app.9703452e.js.map